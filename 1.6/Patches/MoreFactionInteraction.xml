<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/WorldObjectDef[defName="Settlement"]/comps</xpath>
    <value>
      <li Class="MoreFactionInteraction.World_Incidents.WorldObjectCompProperties_BumperCrop" />
    </value>
  </Operation>
  <Operation Class="PatchOperationConditional">
    <xpath>/Defs/WorldObjectDef[defName="Caravan"]/comps</xpath>
    <nomatch Class="PatchOperationAdd">
      <xpath>/Defs/WorldObjectDef[defName="Caravan"]</xpath>
      <value>
        <comps>
          <li>
            <compClass>MoreFactionInteraction.World_Incidents.WorldObjectComp_CaravanComp</compClass>
          </li>
        </comps>
      </value>
    </nomatch>
    <match Class="PatchOperationAdd">
      <xpath>/Defs/WorldObjectDef[defName="Caravan"]/comps</xpath>
      <value>
        <li>
          <compClass>MoreFactionInteraction.World_Incidents.WorldObjectComp_CaravanComp</compClass>
        </li>
      </value>
    </match>
  </Operation>
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Relations Tab</li>
    </mods>
    <nomatch Class="PatchOperationReplace">
      <xpath>/Defs/MainButtonDef[defName="Factions"]/tabWindowClass</xpath>
      <value>
        <tabWindowClass>MoreFactionInteraction.MoreFactionWar.MainTabWindow_FactionWar</tabWindowClass>
      </value>
    </nomatch>
  </Operation>
  <!-- Events that you don't want to show up as a Quest, or would likely error when not triggered naturally.  -->
  <Operation Class="PatchOperationConditional">
    <xpath>/Defs/JobDef[defName="RQ_QuestWithPawn"]</xpath>
    <success>Always</success>
    <match Class="PatchOperationAddModExtension">
      <xpath>Defs/IncidentDef[defName="MFI_DiplomaticMarriage" or defName="MFI_HuntersLodge" or defName="MFI_SettlementBaseAttack" or defName="MFI_Quest_PeaceTalks"]</xpath>
      <value>
        <li Class="RimQuest.RimQuest_ModExtension">
          <canBeARimQuest>false</canBeARimQuest>
        </li>
      </value>
    </match>
  </Operation>
</Patch>
